<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Map Tile Adapter - Leaflet"
    />
    <title>Map Tile Adapter - Leaflet</title>
    <link href="./leaflet/dist/leaflet.css" rel="stylesheet" />
    <script src="./leaflet/dist/leaflet.js"></script>
    <script src="./bundle.min.js"></script>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
      }
      #map {
        width: 100%;
        height: 100vh;
      }
      .legend {
        position: absolute;
        top: 8px;
        right: 8px;
        min-width: 100px;
        padding: 4px;
        background-color: #fff;
      }
      .legendItem {
        display: block;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="map"></div>
    <div class="legend">
      <label class="legendItem">
        <input type="checkbox" class="layerCheckbox" name="basic4326-256-layer" checked />
        EPSG:4326
      </label>
    </div>
    <script defer>
      var map = new L.map('map', {
        center: [0, 45],
        zoom: 3,
      });

      const osmLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
      }).addTo(map);

      const mtaLayer = L.mtaLayer({ 
        ...window.MapTileAdapter.epsg4326ToEpsg3857Presets(),
        tileSize: 256,
        interval: [256, 1],
        url: 'https://api.maptiler.com/maps/basic-4326/256/{sz}/{sx}/{sy}.png?key=bS8WSqUoVgfQRrMrQuvE'
      }).addTo(map);

      // function updateVisibility(layerId, isVisible) {
      //   var visibility = isVisible ? 'visible' : 'none';
      //   map.setLayoutProperty(layerId, 'visibility', visibility);
      // }

      // function handleLayerCheckboxChange(event) {
      //   updateVisibility(event.target.name, event.target.checked)
      // };

      // var checkboxes = document.getElementsByClassName('layerCheckbox');

      // for (var i = 0; i < checkboxes.length; i++) {
      //   checkboxes[i].addEventListener('change', handleLayerCheckboxChange);
      // }
    </script>
  </body>
</html>
